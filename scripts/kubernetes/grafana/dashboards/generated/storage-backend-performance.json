{"style": "dark", "schemaVersion": 12, "title": "Storage Backend Performance and Health", "tags": [], "rows": [{"collapse": false, "editable": true, "panels": [{"type": "grafana-piechart-panel", "span": 4, "aliasColors": {"min:": "#890F02", "disk lost: 3": "#890F02"}, "error": false, "cacheTimeout": null, "editable": true, "links": [], "nullPointMode": "connected", "format": "short", "legendType": "Right side", "isNew": true, "timeFrom": null, "valueName": "current", "strokeWidth": 1, "fontSize": "80%", "title": "Disk safety", "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "last", "params": []}]], "groupBy": [{"type": "tag", "params": ["disk_safety"]}], "dsType": "influxdb", "resultFormat": "time_series", "measurement": "ovs.disk_safety.objects|m", "policy": "default", "refId": "B", "alias": "disk safety: $tag_disk_safety", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}]}], "id": 4, "hideTimeOverride": false, "datasource": "influxdb_main", "maxDataPoints": 3, "interval": "> 30s", "legend": {"values": false, "show": true}, "pieType": "pie"}, {"type": "table", "span": 4, "scroll": true, "sort": {"desc": true, "col": 0}, "columns": [{"text": "Current", "value": "current"}], "fontSize": "100%", "error": false, "title": "Used buckets", "id": 10, "transform": "timeseries_aggregations", "editable": true, "links": [], "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "last", "params": []}]], "groupBy": [{"type": "tag", "params": ["bucket"]}, {"type": "tag", "params": ["disk_safety"]}], "dsType": "influxdb", "resultFormat": "time_series", "measurement": "ovs.bucket.objects|m", "policy": "default", "refId": "B", "alias": "bucket: $tag_bucket, disk safety: $tag_disk_safety", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}]}], "datasource": "influxdb_main", "styles": [{"dateFormat": "YYYY-MM-DD HH:mm:ss", "pattern": "Time", "type": "date"}, {"type": "number", "thresholds": [], "unit": "short", "pattern": "/.*/", "colorMode": null, "decimals": 2, "colors": ["rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)"]}], "showHeader": true, "interval": ">5m", "isNew": true, "pageSize": null}, {"hideTimeOverride": false, "timeFrom": null, "type": "table", "span": 4, "scroll": true, "sort": {"desc": false, "col": null}, "columns": [{"text": "Current", "value": "current"}], "fontSize": "100%", "error": false, "title": "Asd status", "id": 3, "transform": "timeseries_aggregations", "editable": true, "links": [], "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "last", "params": []}]], "groupBy": [], "dsType": "influxdb", "rawQuery": false, "resultFormat": "time_series", "measurement": "ovs.backend.green|m", "policy": "default", "refId": "D", "alias": "green", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}], "query": "SELECT \"claimed\", \"warning\", \"failure\",\"error\", \"decommissioning\", \"decommissioned\" FROM \"backend_stats\" WHERE \"backend_name\" =~ /^$backend$/"}, {"select": [[{"type": "field", "params": ["value"]}, {"type": "last", "params": []}]], "groupBy": [], "dsType": "influxdb", "rawQuery": false, "resultFormat": "time_series", "measurement": "ovs.backend.orange|m", "policy": "default", "refId": "A", "alias": "orange", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}], "query": "SELECT \"claimed\", \"warning\", \"failure\",\"error\", \"decommissioning\", \"decommissioned\" FROM \"backend_stats\" WHERE \"backend_name\" =~ /^$backend$/"}, {"select": [[{"type": "field", "params": ["value"]}, {"type": "last", "params": []}]], "groupBy": [], "dsType": "influxdb", "rawQuery": false, "resultFormat": "time_series", "measurement": "ovs.backend.red|m", "policy": "default", "refId": "B", "alias": "red", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}], "query": "SELECT \"claimed\", \"warning\", \"failure\",\"error\", \"decommissioning\", \"decommissioned\" FROM \"backend_stats\" WHERE \"backend_name\" =~ /^$backend$/"}], "datasource": "influxdb_main", "styles": [{"dateFormat": "YYYY-MM-DD HH:mm:ss", "pattern": "Time", "type": "date"}, {"type": "number", "thresholds": [], "unit": "short", "pattern": "/.*/", "colorMode": null, "decimals": 0, "colors": ["rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)"]}], "showHeader": true, "interval": ">5m", "isNew": true, "pageSize": null}], "title": "Row", "height": 278.84375}, {"collapse": false, "editable": true, "panels": [{"type": "table", "span": 1.9179524058577408, "scroll": true, "sort": {"desc": true, "col": 0}, "columns": [{"text": "Current", "value": "current"}], "fontSize": "100%", "error": false, "title": "Repair tasks", "id": 11, "transform": "timeseries_aggregations", "editable": true, "links": [], "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "last", "params": []}]], "groupBy": [{"type": "tag", "params": ["disk_lost"]}], "dsType": "influxdb", "resultFormat": "time_series", "measurement": "ovs.disk_lost.objects|m", "policy": "default", "refId": "B", "alias": "lost: $tag_disk_lost disks", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}]}], "datasource": "influxdb_main", "styles": [{"dateFormat": "YYYY-MM-DD HH:mm:ss", "pattern": "Time", "type": "date"}, {"type": "number", "thresholds": [], "unit": "short", "pattern": "/.*/", "colorMode": null, "decimals": 2, "colors": ["rgba(245, 54, 54, 0.9)", "rgba(237, 129, 40, 0.89)", "rgba(50, 172, 45, 0.97)"]}], "showHeader": true, "interval": ">5m", "isNew": true, "pageSize": null}, {"timeFrom": null, "type": "graph", "span": 10.082047594142258, "points": false, "aliasColors": {}, "pointradius": 5, "error": false, "lines": true, "fill": 1, "editable": true, "linewidth": 2, "timeShift": null, "targets": [{"resultFormat": "time_series", "measurement": "ovs.disk_lost.objects|m", "query": "SELECT mean(\"value\") FROM \"ovs.disk_lost.objects|m\" WHERE \"backend_name\" =~ /^$backend$/ AND \"disk_lost\" <> '0' AND $timeFilter GROUP BY time($interval), \"backend_name\", \"disk_lost\"", "select": [[{"type": "field", "params": ["value"]}, {"type": "mean", "params": []}]], "groupBy": [{"type": "time", "params": ["$interval"]}, {"type": "tag", "params": ["backend_name"]}, {"type": "tag", "params": ["disk_lost"]}], "dsType": "influxdb", "rawQuery": false, "hide": false, "policy": "default", "refId": "B", "alias": "lost: $tag_disk_lost disks", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}, {"condition": "AND", "key": "disk_lost", "operator": "<>", "value": "0"}]}], "nullPointMode": "connected", "decimals": 2, "isNew": true, "seriesOverrides": [], "tooltip": {"shared": true, "value_type": "cumulative", "sort": 0, "msResolution": true}, "steppedLine": false, "renderer": "flot", "yaxes": [{"logBase": 1, "max": null, "label": null, "format": "percentunit", "show": true, "min": 0}, {"logBase": 1, "max": null, "label": null, "format": "short", "show": true, "min": null}], "bars": false, "xaxis": {"show": true}, "title": "To be repaired fragments", "id": 9, "grid": {"threshold2Color": "rgba(234, 112, 112, 0.22)", "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold1": null, "threshold2": null}, "percentage": false, "links": [], "stack": false, "datasource": "influxdb_main", "interval": "", "legend": {"current": true, "values": true, "show": true, "total": false, "rightSide": false, "hideZero": false, "max": false, "min": false, "hideEmpty": false, "alignAsTable": false, "avg": false}}], "title": "New row", "height": 243.03125}, {"collapse": false, "editable": true, "panels": [{"timeFrom": null, "type": "graph", "error": false, "points": false, "aliasColors": {}, "pointradius": 5, "span": 6, "lines": true, "fill": 1, "editable": true, "linewidth": 2, "timeShift": null, "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "median", "params": []}, {"type": "non_negative_derivative", "params": ["5m"]}]], "groupBy": [{"type": "time", "params": ["$interval"]}, {"type": "tag", "params": ["backend_name"]}], "dsType": "influxdb", "rawQuery": false, "resultFormat": "time_series", "measurement": "ovs.backend.gets|m", "policy": "default", "refId": "B", "alias": "$tag_backend_name gets", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}], "query": "SELECT non_negative_derivative(\"gets\", 1m) FROM \"backend_stats\" WHERE \"backend_name\" =~ /^$backend$/ AND $timeFilter GROUP BY \"backend_name\""}], "nullPointMode": "connected", "isNew": true, "seriesOverrides": [], "tooltip": {"shared": true, "value_type": "cumulative", "sort": 0, "msResolution": true}, "steppedLine": false, "renderer": "flot", "yaxes": [{"logBase": 1, "max": null, "label": null, "format": "short", "show": true, "min": null}, {"logBase": 1, "max": null, "label": null, "format": "short", "show": true, "min": null}], "bars": false, "xaxis": {"show": true}, "title": "Gets / min", "id": 8, "grid": {"threshold2Color": "rgba(234, 112, 112, 0.22)", "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold1": null, "threshold2": null}, "percentage": false, "links": [], "stack": false, "datasource": "influxdb_main", "interval": ">5m", "legend": {"current": false, "total": false, "values": false, "max": false, "avg": false, "show": true, "min": false}}, {"timeFrom": null, "type": "graph", "error": false, "points": false, "aliasColors": {}, "pointradius": 5, "span": 6, "lines": true, "fill": 1, "editable": true, "linewidth": 2, "timeShift": null, "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "median", "params": []}, {"type": "non_negative_derivative", "params": ["5m"]}]], "groupBy": [{"type": "time", "params": ["$interval"]}, {"type": "tag", "params": ["backend_name"]}], "dsType": "influxdb", "resultFormat": "time_series", "measurement": "ovs.backend.puts|m", "policy": "default", "refId": "A", "alias": "$tag_backend_name puts", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}]}], "nullPointMode": "connected", "isNew": true, "seriesOverrides": [], "tooltip": {"shared": true, "value_type": "cumulative", "sort": 0, "msResolution": true}, "steppedLine": false, "renderer": "flot", "yaxes": [{"logBase": 1, "max": null, "label": null, "format": "short", "show": true, "min": null}, {"logBase": 1, "max": null, "label": null, "format": "short", "show": true, "min": null}], "bars": false, "xaxis": {"show": true}, "title": "Puts / min", "id": 7, "grid": {"threshold2Color": "rgba(234, 112, 112, 0.22)", "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold1": null, "threshold2": null}, "percentage": false, "links": [], "stack": false, "datasource": "influxdb_main", "interval": ">5m", "legend": {"current": false, "total": false, "values": false, "max": false, "avg": false, "show": true, "min": false}}], "title": "New row", "height": "250px"}, {"collapse": false, "editable": true, "panels": [{"timeFrom": null, "type": "graph", "span": 12, "points": false, "aliasColors": {"backend_size.mean": "#890F02", "free": "#7EB26D", "backend_size.mean_1": "#629E51", "used": "#890F02"}, "pointradius": 5, "error": false, "lines": true, "fill": 0, "editable": true, "linewidth": 2, "timeShift": null, "targets": [{"select": [[{"type": "field", "params": ["value"]}, {"type": "mean", "params": []}]], "groupBy": [{"type": "time", "params": ["$interval"]}, {"type": "tag", "params": ["backend_name"]}], "dsType": "influxdb", "rawQuery": false, "resultFormat": "time_series", "measurement": "ovs.backend.used|m", "policy": "default", "refId": "A", "alias": "used", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}], "query": "SELECT \"used\"  / (\"used\" + \"free\") FROM \"backend\" WHERE \"backend_name\" =~ /^$backend$/ AND $timeFilter GROUP BY \"backend_name\""}, {"select": [[{"type": "field", "params": ["value"]}, {"type": "mean", "params": []}]], "groupBy": [{"type": "time", "params": ["$interval"]}, {"type": "tag", "params": ["backend_name"]}], "dsType": "influxdb", "rawQuery": false, "resultFormat": "time_series", "measurement": "ovs.backend.free|m", "policy": "default", "refId": "B", "alias": "free", "tags": [{"key": "backend_name", "operator": "=~", "value": "/^$backend$/"}], "query": "SELECT \"used\"  / (\"used\" + \"free\") FROM \"backend\" WHERE \"backend_name\" =~ /^$backend$/ AND $timeFilter GROUP BY \"backend_name\""}], "nullPointMode": "connected", "decimals": 2, "isNew": true, "seriesOverrides": [], "tooltip": {"shared": true, "value_type": "cumulative", "sort": 0, "msResolution": true}, "steppedLine": false, "renderer": "flot", "yaxes": [{"logBase": 1, "max": null, "label": null, "format": "bytes", "show": true, "min": 0}, {"logBase": 1, "max": null, "label": null, "format": "bytes", "show": true, "min": null}], "bars": false, "xaxis": {"show": true}, "title": "Space", "id": 5, "grid": {"thresholdLine": false, "threshold2Color": "rgba(234, 112, 112, 0.22)", "threshold1Color": "rgba(216, 200, 27, 0.27)", "threshold1": null, "threshold2": null}, "percentage": false, "links": [], "stack": false, "datasource": "influxdb_main", "interval": "", "legend": {"current": true, "total": false, "values": true, "max": false, "avg": false, "show": true, "min": false}}], "title": "New row", "height": "250px"}], "sharedCrosshair": false, "version": 11, "timezone": "browser", "editable": true, "time": {"from": "now-3h", "to": "now"}, "hideControls": false, "templating": {"list": [{"type": "query", "current": {"text": "mybackend", "value": "mybackend"}, "includeAll": false, "refresh": 2, "hide": 0, "multi": false, "name": "backend", "datasource": "influxdb_main", "useTags": false, "options": [{"text": "mybackend", "selected": true, "value": "mybackend"}], "query": "SHOW TAG VALUES WITH KEY = \"backend_name\""}]}, "id": null, "refresh": "1m", "links": [], "annotations": {"list": []}, "gnetId": null, "description": "This dashboards gives the operator an overall view of the storage backend performance and health.", "timepicker": {"time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"], "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"]}}